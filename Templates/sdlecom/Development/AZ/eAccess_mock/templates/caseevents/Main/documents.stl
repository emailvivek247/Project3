

<#assign display=JspTaglibs["http://displaytag.sf.net"]>


<#if searchResult.docs?has_content>
    <#assign ResultId =0>
	<@display.table name="searchResult.docs" id="doc" export=true requestURI="/search.do" excludedParams="searchType CaseNumberDisplay CaseNumberDisplay_select EventDate EventDate_select SourceSystemEventDescription SourceSystemEventDescription_select CourtCode CourtCode_select ">
	  <#include "document.stl">
	  <@display.setProperty name="export.title" value="Search Criteria :${Request.searchForm.searchQuery}" />  
	</@display.table>
<#elseif searchResult.xstreamdocs?has_content>
	<#assign ResultId =0>
	<@display.table name="searchResult.xstreamdocs" id="doc" export=true requestURI="/search.do" excludedParams="searchType CaseNumberDisplay CaseNumberDisplay_select EventDate EventDate_select SourceSystemEventDescription SourceSystemEventDescription_select CourtCode CourtCode_select ">
	  <#include "document.stl">
	  <@display.setProperty name="export.title" value="Search Criteria :${Request.searchForm.searchQuery}" />  
	</@display.table>
<#else>
 <#include "noResults.stl"> 
</#if>



<script type="text/javascript">
$(document).ready(function() {
    oTable = $('#doc').dataTable({
        "bJQueryUI": true,
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false,
        "aaSorting": []
    });

      $(".cartLink").click(function() {
        var dataString = 'indexName=docdetails&templateName=Image&lq=DocumentID:' + $(this).attr("title");
        $.ajax({
          type: "POST",
          url: "${request.getContextPath()}/search.do",
          data: dataString,      
          success: function(data) {
            $.each(data, function(i,item){                  
                 if (item.code == "EXISTS") {
                    var txt = item.description + "You can view your purchase using the below link, <br/> <a target='_blank' href='viewWebPaymentDetails.admin?webTxId=" + item.moduleName + "'>View Image</a>";     
                    $.prompt(txt);
                 } else if (item.code == "SUCCESS") {
                    if (item.count == 0) {
                        $("span#shoppingCartItems").text('  Shopping cart is Empty');
                        $.prompt(item.description);
                    } else {
                        $("span#shoppingCartItems").text('  ' + item.count + ' Item(s) in the Shopping Cart');
                        $.prompt(item.description);
                    }
                 } else {
                    $.prompt(item.description); 
                 }
              });     
          }
        });
    return false;
    });

    $(".cartLinkCert").click(function() {
    		var nameString = $(this).attr("name");
            var dataString = 'indexName=docdetails&templateName=Image'+ nameString + '&isCertifiedString=true&lq=DocumentID:' + $(this).attr("title");
            $.ajax({
              type: "POST",
              url: "${request.getContextPath()}/search.do",
              data: dataString,
              success: function(data) {
                $.each(data, function(i,item){
                     if (item.code == "EXISTS") {
                        var txt = item.description + "You can view your purchase using the below link, <br/> <a target='_blank' href='viewWebPaymentDetails.admin?webTxId=" + item.moduleName + "'>View Image</a>";
                        $.prompt(txt);
                     } else if (item.code == "SUCCESS") {
                        if (item.count == 0) {
                            $("span#shoppingCartItems").text('  Shopping cart is Empty');
                            $.prompt(item.description);
                        } else {
                            $("span#shoppingCartItems").text('  ' + item.count + ' Item(s) in the Shopping Cart');
                            $.prompt(item.description);
                        }
                     } else {
                        $.prompt(item.description);
                     }
                  });
              	}
            });
        return false;
    });

} );
</script>
