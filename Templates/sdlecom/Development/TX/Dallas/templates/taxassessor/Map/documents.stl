<#assign num_pages = (searchResult.total/searchResult.length)?int>

<#if num_pages*searchResult.length < searchResult.total>
 <#assign num_pages = num_pages + 1>
</#if>
<#assign current_page_index = (searchResult.start/searchResult.length)?int + 1>

<#assign startItemIndex = (current_page_index-1)*searchResult.length + 1>
<#assign endItemIndex = current_page_index*searchResult.length>
<#if (endItemIndex>searchResult.total)>
 <#assign endItemIndex = searchResult.total>
</#if>

<#assign dummy = result.put("total_results", total)>
<#assign dummy = result.put("total_pages", num_pages)>
<#assign dummy = result.put("current_page", current_page_index)>
<#assign dummy = result.put("page_length", length)>
<#assign dummy = result.put("start_item_index", startItemIndex)>
<#assign dummy = result.put("end_item_index", endItemIndex)>
<#assign dummy = result.put("search_time", searchTime)>
<#assign dummy = result.put("query", q)>
<#assign items = new("org.json.simple.JSONArray")>

<#if searchResult.docs?has_content>
<#foreach doc in docs>
 <#assign item = new("org.json.simple.JSONObject")>
    <#assign dummy = item.put("ACCOUNT_NUM", searchResult.highlight(doc,"ACCOUNT_NUM"))>
    <#assign dummy = item.put("NUM_BEDROOMS", searchResult.highlight(doc,"NUM_BEDROOMS"))>
    <#assign dummy = item.put("NUM_FIREPLACES", searchResult.highlight(doc,"NUM_FIREPLACES"))>
    <#assign dummy = item.put("NUM_FULL_BATHS", searchResult.highlight(doc,"NUM_FULL_BATHS"))>
    <#assign dummy = item.put("NUM_HALF_BATHS", searchResult.highlight(doc,"NUM_HALF_BATHS"))>
    <#assign dummy = item.put("NUM_KITCHENS", searchResult.highlight(doc,"NUM_KITCHENS"))>
    <#assign dummy = item.put("OWNER_ADDRESS", searchResult.highlight(doc,"OWNER_ADDRESS"))>
    <#assign dummy = item.put("OWNER_CITY", searchResult.highlight(doc,"OWNER_CITY"))>
    <#assign dummy = item.put("OWNER_NAME1", searchResult.highlight(doc,"OWNER_NAME1"))>
    <#assign dummy = item.put("OWNER_STATE", searchResult.highlight(doc,"OWNER_STATE"))>
    <#assign dummy = item.put("OWNER_ZIPCODE", searchResult.highlight(doc,"OWNER_ZIPCODE"))>
 <#assign dummy = item.put("TOT_VAL", doc.getObject("TOT_VAL"))>

   
     <#assign dummy = items.add(item)>
</#foreach>
</#if>

<#assign dummy = result.put("items", items)>
