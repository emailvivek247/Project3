<#assign imagesPresent = ["2010-CH-47325", "2011-CH-18279","2009-CH-33141","2009-CH-27590","2011-CH-06567","2010-CH-36264","2009-CH-06344","2008-CH-40214","2011-CH-31653","2011-CH-27227","2011-M1-153595","2011-M1-108197","2011-M1-143640","2011-M1-017936","2011-M1-140557","2011-M1-158601","2011-M1-153005","2011-M1-127894","2011-M1-701248","2010-M1-125341","2011-M2-001221","1999-M3-003154","2006-M3-001844","2007-M3-000475","2007-M3-002823","2008-M3-000603","2011-M6-003576","2011-M6-002451","2011-M4-001935","2011-M4-001931"]>
<A HREF="javascript:history.go(-1)">Â« Back to search results</a>
<br /><br />
<style>
.datatables_wrapper {
   min-height: 80px;
}
</style>
<#if searchResult.docs?has_content>
    <#assign caseCounter = 0>        
    <#foreach doc in searchResult.docs>
        <#if doc.getValues("CaseNumber")?has_content>
            <#assign caseCounter = 1>
        </#if>
        <#if doc.getValues("ID")?has_content>
            <#assign partyCounter = 1>
        </#if>
        <#if doc.getValues("ID")?has_content>
            <#assign activeCounter = 1>
        </#if>
    </#foreach>
        <#assign docCounter = 0> 
    <#foreach doc in searchResult.docs>
        <#assign docCounter = docCounter + 1> 
  
    <#--Start General Case Info-->
       <#if (docCounter <= 1)>
    <#if (caseCounter > 0)>
      <b>General Case Information</b>
                <table id="case" class="tablesorter">
                <thead>
                    <tr>
                      <th>${searchResult.datasetConfiguration.getColumn("CaseNumber").displayName}</th>
                      <th>${searchResult.datasetConfiguration.getColumn("DateFiled").displayName}</th>
                      <th>${searchResult.datasetConfiguration.getColumn("CaseType").displayName}</th>
                      <th>${searchResult.datasetConfiguration.getColumn("Division").displayName}</th>
                      <th>${searchResult.datasetConfiguration.getColumn("District").displayName}</th>
                      <th>${searchResult.datasetConfiguration.getColumn("AdDamnum").displayName}</th>
                                        </tr>
                </thead>
            <tbody>
            <#assign CaseNumbers = doc.getValues("CaseNumber") 
                 DateFiled = doc.getValues("DateFiled") 
                 CaseType = doc.getValues("CaseType") 
                 Division = doc.getValues("Division") 
                 District = doc.getValues("District") 
                 AdDamnum = doc.getValues("AdDamnum") 
                loopCounter = 0>

            <#foreach CaseNumber in doc.getValues("CaseNumber")>
                        <#assign casenumberholder = CaseNumber>
                    <tr>
                        
                        <td>${CaseNumbers[loopCounter]}</td>
                        <td>${pageStyleUtil.format(DateFiled[loopCounter], "yyyyMMdd", "MM/dd/yyyy")}</td>
                            <td>${CaseType[loopCounter]}</td>
                        <td>${Division[loopCounter]}</td>
                                                <td>${District[loopCounter]}</td>
                                                <td>${AdDamnum[loopCounter]}</td>
                                                <#assign loopCounter = loopCounter + 1>
                    </tr>
            </#foreach>
            </tbody>
         </table>
    <#else>
        <br /><br />
        <b><i>No Case Information Available.</i></b>
        <br /><br />
    </#if>
       </#if>


    <#--Start Party Info-->
           <#if (docCounter <= 1)>
        <#if (partyCounter > 0)>
          <b>Party Information</b>
             <table id="party1" class="tablesorter">
                    <thead>
                        <tr>
                          <th>${searchResult.datasetConfiguration.getColumn("PlaintiffName").displayName}</th>
                          <th>${searchResult.datasetConfiguration.getColumn("PlaintiffAKA").displayName}</th>
                          
                        </tr>
                    </thead>
                <tbody>
                <#assign PlaintiffNames = doc.getValues("PlaintiffName") 
                     PlaintiffAKA = doc.getValues("PlaintiffAKA")
                     DefendantName = doc.getValues("DefendantName")
                     DefendantAKA = doc.getValues("DefendantAKA")
                loopCounter = 0>
    
                <#foreach PlaintiffName in doc.getValues("PlaintiffName")>
                        <tr>
                            <td>
                                <#if PlaintiffNames[loopCounter]?has_content> ${PlaintiffNames[loopCounter]}<#else>&nbsp;</#if>
                            </td>
                            <td>
                                <#if PlaintiffAKA[loopCounter]?has_content> ${PlaintiffAKA[loopCounter]}<#else>&nbsp;</#if>
                            </td>
                            <#assign loopCounter = loopCounter + 1>
                        </tr>
                </#foreach>
                </tbody>
                </table>   
		 <table id="party2" class="tablesorter">
                <thead>
                
                <#assign DefendantNames = doc.getValues("DefendantName")
                     DefendantAKA = doc.getValues("DefendantAKA")
                loopCounter = 0>
                        <tr>
                          <th>${searchResult.datasetConfiguration.getColumn("DefendantName").displayName}</th>
                          <th>${searchResult.datasetConfiguration.getColumn("DefendantAKA").displayName}</th>
                        </tr>
                </thead>
               <#foreach DefendantName in DefendantNames>
                        <tr>
                          <td><#if DefendantNames[loopCounter]?has_content> ${DefendantNames[loopCounter]}<#else>&nbsp;</#if></td>
                          <td><#if DefendantAKA [loopCounter]?has_content> ${DefendantAKA [loopCounter]}<#else>&nbsp;</#if></td>
                          <#assign loopCounter = loopCounter + 1>
                        </tr>
               </#foreach>  
             </table>
        <#else>
            <br /><br />
            <b><i>No Party Information Available.</i></b>
            <br /><br />
    </#if>
    </#if>
    
    <#--Case Activity Info-->
       <#if (docCounter <= 1)>
            <#if (activeCounter > 0)>
              <b>Case Activity Information</b>
                 <table id="activity" class="tablesorter">
                        <thead>
                            <tr>
                              <th>${searchResult.datasetConfiguration.getColumn("ActivityDate").displayName}</th>
                              <th>${searchResult.datasetConfiguration.getColumn("ActyDesc").displayName}</th>
                              <th>${searchResult.datasetConfiguration.getColumn("CourtDate").displayName}</th>
                              <th>${searchResult.datasetConfiguration.getColumn("CourtRoom").displayName}</th>
                              <th>${searchResult.datasetConfiguration.getColumn("CourtTime").displayName}</th>
                              <th>${searchResult.datasetConfiguration.getColumn("Judge").displayName}</th>
                              <th>${searchResult.datasetConfiguration.getColumn("JudgementAmount").displayName}</th>
                              <th>${searchResult.datasetConfiguration.getColumn("CourtFee").displayName}</th>
                              <#if request.isUserInRole('COOK_PERPAGE_ACCESS')><th>Preview Image</th></#if>
                              <th>Image</th>
                            </tr>
                        </thead>
                    <tbody>
                                    <#foreach doc2 in searchResult.docs>                
                    <#assign ActivityDate = doc2.getValues("ActivityDate")
                         ActyDesc = doc2.getValues("ActyDesc")
                         CourtDate = doc2.getValues("CourtDate")
                         CourtRoom = doc2.getValues("CourtRoom") 
                         CourtTime = doc2.getValues("CourtTime")
                         CourtFee = doc2.getValues("CourtFee") 
                         Judge = doc2.getValues("Judge")
                         JudgementAmount = doc2.getValues("JudgementAmount")
                         IDs = doc2.getValues("ID")
                    loopCounter = 0>
        
                    <#foreach ID in IDs>
                            <tr>
                                
                                <#if ActivityDate[loopCounter]?has_content >
                                    <td>${pageStyleUtil.format(ActivityDate[loopCounter], "yyyyMMdd", "MM/dd/yyyy")}</td>
                                <#else>
                                    <td>&nbsp;</td>
                                </#if>
                                <#if ActyDesc[loopCounter]?has_content >
                                    <td>${ActyDesc[loopCounter]}</td>
                                <#else>
                                    <td>&nbsp;</td>
                                </#if>                                  
                                <td>${pageStyleUtil.format(CourtDate[loopCounter], "ddyyyyMM", "MM/dd/yyyy")}</td>
                                <td>${CourtRoom[loopCounter]}</td>
                                <td>${CourtTime[loopCounter]}</td>
                                <td>${Judge[loopCounter]}</td>
                                <td>${CourtTime[loopCounter]}</td>
                                <td>${CourtFee[loopCounter]}</td>
                                <#if request.isUserInRole('COOK_PERPAGE_ACCESS')>
                                <td>    
                                     <#if imagesPresent?seq_contains(casenumberholder?trim) && ActivityDate[loopCounter] == "20120109">
                                       <a target="_blank" href='${request.getContextPath()}/search.do?indexName=imageindex&templateName=imagepreview&path=civil&lq=%23DATE%3A%22${ActivityDate[loopCounter]}%22~5%23 AND  %23CASENUMBER%3A%22${casenumberholder}%22~5%23' title="View Image"><img border="0" title="Preview" src="<@com.currentUrlPrefix/>/resource/preview.png"></a>
                                     <#else>
                                    Image Not Available
                                     </#if>   
                                </td>
                                    </#if>
                                <td>
                                 <#if imagesPresent?seq_contains(casenumberholder?trim) && ActivityDate[loopCounter] == "20120109">     
                                    <#if request.isUserInRole('COOK_ADMIN') || request.isUserInRole('COOK_ALL_ACCESS') || request.isUserInRole('ROAM_ADMIN') >
                                               <a target="_blank" href='${request.getContextPath()}/search.do?indexName=imageindex&path=civil&lq=%23DATE%3A%22${ActivityDate[loopCounter]}%22~5%23 AND  %23CASENUMBER%3A%22${casenumberholder}%22~5%23' title="View Image"><img border="0" title="Preview" src="<@com.currentUrlPrefix/>/resource/preview.png">View Image</a>
                                      <#else>
                                        <input class="cartLink" type="button" title="${ActivityDate[loopCounter]}|${casenumberholder}" value="Add to Shopping Cart"/>  
                                      </#if> 
                                 <#else>
                                    Image Not Available
                                 </#if>       
                                     </td>
                                <#assign loopCounter = loopCounter + 1>
                            </tr>
                    </#foreach>
                     </#foreach>
                                     </tbody>
                                 </table>
            <#else>
                <br /><br />
                <b><i>No Case Activity Information Available.</i></b>
                <br /><br />
    </#if>
    </#if>
    
    </#foreach> 
</#if>

<script type="text/javascript">


$(function() {      
oTable1 = $('#party1').dataTable({
        "bJQueryUI": true,
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false
    });
    oTable2 = $('#party2').dataTable({
        "bJQueryUI": true,
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false
    });

     oTable3 = $('#case').dataTable({
        "bJQueryUI": true,
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false
    });

        oTable4 = $('#activity').dataTable({
        "bJQueryUI": true,
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false,
                "aoColumns": [
            { "asSorting": [ "desc" ] }
        ]
    });

    $(".cartLink").click(function() {
        $.prompt("Adding To Cart..."); 
        var date = $(this).attr("title").split("|")[0];
        var caseNumber = $(this).attr("title").split("|")[1];
        var dataString = 'indexName=imageindex&path=civil&date=' + date + '&case=' + caseNumber + '&lq=%23DATE%3A%22' + date + '%22~5%23+AND++%23CASENUMBER%3A%22' + caseNumber + '%22~5%23';
        $.ajax({
          type: "POST",
          url: "${request.getContextPath()}/search.do",
          data: dataString,      
          success: function(data) {
            $.each(data, function(i,item){                  
                         $.prompt.close()  
                 if (item.code == "EXISTS") {
                    var txt = item.description + "You can view your purchase using the below link, <br/> <a target='_blank' href='viewPayAsUGoPaymentDetails.admin?webTxId=" + item.moduleName + "'>View Purchase</a>";     
                    $.prompt(txt);
                 } else if (item.code == "SUCCESS") {
                    if (item.count == 0) {
                        $("span#shoppingCartItems").text('  Shopping cart is Empty');
                        $.prompt(item.description);
                    } else {
                        $("span#shoppingCartItems").text('  ' + item.count + ' Item(s) in the Shopping Cart');
                        $.prompt(item.description);
                    }
                 } else {
                    $.prompt(item.description); 
                 }
              });     
          }
        });
            return false;
    });
}); 
</script>       