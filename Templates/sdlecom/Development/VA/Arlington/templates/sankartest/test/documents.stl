
<#macro renderTableHeader c>
${C}
 <#if c.isSortable>
  <#assign isDescending = c.isDescending>
  <#if searchResult.searchSorts?has_content>
   <#foreach ss in searchResult.searchSorts>
    <#if c.name == ss.column.name>
     <#assign isDescending = ss.isDescending>
    </#if>
   </#foreach>
  </#if>
  <th class="ui-state-default"><div class="DataTables_sort_wrapper">${c.displayName}<span name="${c.columnName}" class="${isDescending?string("css_right ui-icon ui-icon-triangle-1-s","css_right ui-icon ui-icon-triangle-1-n")}"></span><span></span></div></th>
 <#else>
  <th class="ui-state-default"><div class="DataTables_sort_wrapper">${c.displayName}<span></span><span></span></div></th>
 </#if>
</#macro>


<#if searchResult.docs?has_content>
<table id="searchResult" class="tablesorter">
 <thead><tr>  
    <@renderTableHeader searchResult.datasetConfiguration.getColumn("AMOUNT1")/>
    <@renderTableHeader searchResult.datasetConfiguration.getColumn("DISPLAYNAME")/>
    <@renderTableHeader searchResult.datasetConfiguration.getColumn("DOC_TYPE")/>
    <@renderTableHeader searchResult.datasetConfiguration.getColumn("FNAME")/>
    <@renderTableHeader searchResult.datasetConfiguration.getColumn("LNAME")/>
    <@renderTableHeader searchResult.datasetConfiguration.getColumn("MNAME")/>
    <@renderTableHeader searchResult.datasetConfiguration.getColumn("RECDATE1")/>
    <@renderTableHeader searchResult.datasetConfiguration.getColumn("SEQ_KEY")/>
  
  
  
 </tr></thead>
 <tbody>
<#assign ResultId =0>
 <#foreach doc in searchResult.docs>
  <#include "document.stl">
 </#foreach>
<#else>
 <#include "noResults.stl"> 
</#if>
 </tbody>
</table>
<script type="text/javascript">
$(document).ready(function() {
        $("#searchResult tr:nth-child(odd)").addClass("odd");
        $("#searchResult tr:nth-child(even)").addClass("even");
        $('#searchResult th span').click(function() {
            var t = $(this);
            var url = '?indexName=${indexName}&templateName=${templateName}&fileName=documents.stl&sortBy='+t.attr('name')
                      +'&q=${searchResult.getURLEncodedQuery()}';
            if(t.hasClass("ui-icon-triangle-1-s")){
                 $('#documents').load(url +'&desc=N');
            }else if(t.hasClass("ui-icon-triangle-1-n")){
                 $('#documents').load(url +'&desc=Y');
            }
        });  
} );
</script>
