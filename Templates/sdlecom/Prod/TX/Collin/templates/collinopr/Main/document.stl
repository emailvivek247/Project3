<#-- *Assign variables for Phonetic Search -->
<#assign searchable = request.getParameter("searchable")>
<#assign phonetic = "PhoneticName,Instrument,RecDate,DesigStatus,PartyRole,IndexType,DocType,Book,Page,Lot,Block,CityBlock,MapBook,MapPage,MapInstrumentNumber,Subdivision,CityTown,Freeform,Location">
<#assign search = "DisplayName,LastName,FirstMiddle,Instrument,RecDate,DesigStatus,PartyRole,IndexType,DocType,Book,Page,Lot,Block,CityBlock,MapBook,MapPage,MapInstrumentNumber,Subdivision,CityTown,Freeform,Location">


          <@display.column media="html" indexColumnName="Instrument" title="${searchResult.datasetConfiguration.getColumn(\"Instrument\").displayName}">
          <#-- *Link Instrument Number to Details page -->
                <a href="${request.getContextPath()}/search.do?indexName=collindetails&templateName=default&lq=${pageStyleUtil.encodeURL("Instrument:\"" + doc.get("Instrument") + "\"")}"> ${searchResult.highlight(doc, "Instrument")}</a> 
          </@display.column>
          <@display.column media="rtf excel pdf" indexColumnName="Instrument" title="${searchResult.datasetConfiguration.getColumn(\"Instrument\").displayName}">
                ${number.format("###0.##",doc.get("Instrument"))}
          </@display.column>
          <@display.column media="html" indexColumnName="RecDateDisplay" title="${searchResult.datasetConfiguration.getColumn(\"RecDateDisplay\").displayName}">
          <#-- *Format Recorded Date -->             
                <#if doc.get("RecDateDisplay")?has_content>
                     ${pageStyleUtil.format(doc.get("RecDateDisplay"), "yyyy-MM-dd HH:mm:ss", "MM/dd/yyyy HH:mm:ss a")}         
                </#if>
          </@display.column>
          <@display.column media="rtf excel pdf" indexColumnName="RecDateDisplay" title="${searchResult.datasetConfiguration.getColumn(\"RecDateDisplay\").displayName}">
          <#-- *Format Recorded Date -->                
                <#if doc.get("RecDateDisplay")?has_content>
                    ${pageStyleUtil.format(doc.get("RecDateDisplay"), "yyyy-MM-dd HH:mm:ss", "MM/dd/yyyy HH:mm:ss a")}         
                </#if>
          </@display.column>
          
          

<#-- *Check type of search to allow for highlighting and add DESIGSTATUS -->
            
                <#if isPhoneticSearch == "1">
          <@display.column media="html" indexColumnName="PhoneticName" title="${searchResult.datasetConfiguration.getColumn(\"PhoneticName\").displayName}">
            ${searchResult.highlight(doc, "PhoneticName")}
          </@display.column>
          <@display.column media="rtf excel pdf" indexColumnName="PhoneticName" title="${searchResult.datasetConfiguration.getColumn(\"PhoneticName\").displayName}">
            ${doc.get("PhoneticName")}
          </@display.column>
            <#else> 
          <@display.column media="html" indexColumnName="Name" title="${searchResult.datasetConfiguration.getColumn(\"Name\").displayName}">
            ${searchResult.highlight(doc, "Name")}
          </@display.column>
          <@display.column media="rtf excel pdf" indexColumnName="Name" title="${searchResult.datasetConfiguration.getColumn(\"Name\").displayName}">
            ${doc.get("Name")}
          </@display.column>
                </#if>
          <@display.column media="html" indexColumnName="PartyRole" title="${searchResult.datasetConfiguration.getColumn(\"PartyRole\").displayName}">
            ${searchResult.highlight(doc, "PartyRole")}
          </@display.column>
          <@display.column media="rtf excel pdf" indexColumnName="PartyRole" title="${searchResult.datasetConfiguration.getColumn(\"PartyRole\").displayName}">
            ${doc.get("PartyRole")}
          </@display.column>

          <@display.column media="html" indexColumnName="OtherName" title="${searchResult.datasetConfiguration.getColumn(\"OtherName\").displayName}">
            ${searchResult.highlight(doc, "OtherName")}
          </@display.column>
          <@display.column media="rtf excel pdf" indexColumnName="OtherName" title="${searchResult.datasetConfiguration.getColumn(\"OtherName\").displayName}">
            ${doc.get("OtherName")}
          </@display.column>

          
          <@display.column media="html" indexColumnName="DocTypeDesc" title="${searchResult.datasetConfiguration.getColumn(\"DocTypeDesc\").displayName}">
            ${searchResult.highlight(doc, "DocTypeDesc")}
          </@display.column>
          <@display.column media="rtf excel pdf" indexColumnName="DocTypeDesc" title="${searchResult.datasetConfiguration.getColumn(\"DocTypeDesc\").displayName}">
            ${doc.get("DocTypeDesc")}
          </@display.column>
          <@display.column media="html" indexColumnName="Book" title="${searchResult.datasetConfiguration.getColumn(\"Book\").displayName}">
            ${searchResult.highlight(doc, "Book")}
          </@display.column>
          <@display.column media="rtf excel pdf" indexColumnName="Book" title="${searchResult.datasetConfiguration.getColumn(\"Book\").displayName}">
            ${doc.get("Book")}
          </@display.column>
          <@display.column media="html" indexColumnName="Page" title="${searchResult.datasetConfiguration.getColumn(\"Page\").displayName}">
            ${searchResult.highlight(doc, "Page")}
          </@display.column>
          <@display.column media="rtf excel pdf" indexColumnName="Page" title="${searchResult.datasetConfiguration.getColumn(\"Page\").displayName}">
            ${doc.get("Page")}
          </@display.column>
          <#-- *Check for multiple legal -->
          <@display.column media="html" indexColumnName="LegalDescription" title="${searchResult.datasetConfiguration.getColumn(\"LegalDescription\").displayName}">
                <#if doc.get("MULTIPLE_LEGAL")="Y">
                    ${searchResult.highlight(doc, "LegalDescription")} <font color=red> [+] </font>
                 <#else>
                    ${searchResult.highlight(doc, "LegalDescription")}
                 </#if>
          </@display.column>
          <@display.column media="rtf excel pdf" indexColumnName="LegalDescription" title="${searchResult.datasetConfiguration.getColumn(\"LegalDescription\").displayName}">
                <#if doc.get("MULTIPLE_LEGAL")="Y">
                    ${doc.get("LegalDescription")} <font color=red> [+] </font>
                 <#else>
                    ${doc.get("LegalDescription")}
                 </#if>
          </@display.column>
          <#-- *Check for multiple reference, add link for document chain (disabled) 
          <@display.column media="html" indexColumnName="FirstReference" title="${searchResult.datasetConfiguration.getColumn(\"FirstReference\").displayName}">
                       <#if doc.get("MULTIPLE_REFERENCE")="Y">
				${searchResult.highlight(doc, "FirstReference")}<font color=red> [+] </font>
			<#else>
				${searchResult.highlight(doc, "FirstReference")}
                      </#if>
          </@display.column>
          <@display.column media="rtf excel pdf" indexColumnName="FirstReference" title="${searchResult.datasetConfiguration.getColumn(\"FirstReference\").displayName}">
                      <#if doc.get("MULTIPLE_REFERENCE")="Y">
				${searchResult.highlight(doc, "FirstReference")}<font color=red> [+] </font>
			<#else>
				${searchResult.highlight(doc, "FirstReference")}
                      </#if>
          </@display.column>  -->
          
          
          
	  <@display.column media="html" indexColumnName="FirstReference" title="${searchResult.datasetConfiguration.getColumn(\"FirstReference\").displayName}">
	     ${searchResult.highlight(doc, "FirstReference")}
	  </@display.column>
	  <@display.column media="rtf excel pdf" indexColumnName="FirstReference" title="${searchResult.datasetConfiguration.getColumn(\"FirstReference\").displayName}">
	    ${doc.get("FirstReference")}
          </@display.column>
          
          <@display.column media="html" indexColumnName="Verified" title="${searchResult.datasetConfiguration.getColumn(\"Verified\").displayName}">
            <center>          
            ${searchResult.highlight(doc, "Verified")}
            </center>            
          </@display.column>
          <@display.column media="rtf excel pdf" indexColumnName="Verified" title="${searchResult.datasetConfiguration.getColumn(\"Verified\").displayName}">
            ${doc.get("Verified")}
          </@display.column>
          
          
    <#if request.getServletContext().getInitParameter("isSecurityEnabled") == "false" || (pageStyleUtil.isUserInRoleGroup('OFFICIAL_ROLE', request) || pageStyleUtil.isUserInRoleGroup('ADMIN_ROLE', request))>
	  <@display.column  media="html" title="View Image">
	  <div style="text-align:center" class="gallery clearfix">
		<a class="nocolor pphoto" href="${request.getContextPath()}/search.do?indexName=collinimages&lq=${pageStyleUtil.encodeURL("Instrument:" + doc.get("Instrument"))}&page=1&view=FitV&scrollbar=0&navpanes=0&statusbar=0&messages=0?iframe=true&width=50%25&height=95%25" rel="prettyPhoto[iframe]" title="Instrument : <a  class='nocolor' href='${request.getContextPath()}/search.do?indexName=collindetails&templateName=default&lq=${pageStyleUtil.encodeURL("Instrument:\"" + doc.get("Instrument") + "\"")}'<b>${doc.get("Instrument")}</b></a> </br> Doc Type: ${doc.get("DocType")} </br> Date Recorded: ${pageStyleUtil.format(doc.get("RECDATEDISPLAY"), "yyyy-MM-dd hh:mm:ss", "MM/dd/yyyy hh:mm:ss a")} </br>" ><img border="0" title="Preview" src="<@com.currentUrlPrefix/>/resource/preview.png"></a></div>
	  </@display.column>
	  <@display.column  media="html" title="Briefcase">
		<a href="javascript:;" onclick="addToCart('indexName?=?${indexName}?=?${dc.displayName}', 'pk_key?=?${doc.get("Instrument")}?con?Instrument?=?${doc.get("Instrument")?replace("'", "\\'")?replace("\"", "\\\"")}?con?${searchResult.datasetConfiguration.getColumn("DocType").displayName}?=?${doc.get("DocType")?replace("'", "\\'")?replace("\"", "\\\"")?trim}', 'Instrument%3A${doc.get("Instrument")}', '25');" >Add</a>
	</@display.column>
    <#elseif (pageStyleUtil.isUserInRoleGroup('PER_PAGE_ROLE', request)) || (pageStyleUtil.isUserInRoleGroup('UNOFFICIAL_ROLE', request))>
	<@display.column  media="html" title="Preview Image">
	    <div style="text-align:center" class="gallery clearfix"><a class="nocolor pphoto" href="${request.getContextPath()}/search.do?indexName=collinimages&templateName=imagepreview&lq=${pageStyleUtil.encodeURL("Instrument:" + doc.get("Instrument"))}&page=1&view=FitV&scrollbar=0&navpanes=0&statusbar=0&messages=0?iframe=true&width=50%25&height=95%25" rel="prettyPhoto[iframe]" title="Instrument : <a  class='nocolor' href='${request.getContextPath()}/search.do?indexName=collindetails&lq=${pageStyleUtil.encodeURL("Instrument:\"" + doc.get("Instrument") + "\"")}'<b>${doc.get("Instrument")}</b></a> </br> Doc Type: ${doc.get("DocType")} </br> Date Recorded: ${pageStyleUtil.format(doc.get("RECDATEDISPLAY"), "yyyy-MM-dd hh:mm:ss", "MM/dd/yyyy hh:mm:ss a")} </br>" ><img border="0" title="Preview" src="<@com.currentUrlPrefix/>/resource/preview.png"></a></div>
	</@display.column> 
	 <@display.column  media="html" title="Add to Cart">
	    <input class="cartLink" type="button" title="${doc.get("Instrument")}" value="Add to Cart"/>
	  </@display.column>
    </#if>