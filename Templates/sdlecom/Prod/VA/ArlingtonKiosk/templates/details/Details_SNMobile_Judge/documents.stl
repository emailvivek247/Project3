<#assign documentCounter = 0>

<#--Start DOCUMENT-->
<#if searchResult.docs?has_content>
    <#foreach doc in searchResult.docs>
    <#foreach Instrument in doc.getValues("Instrument")>
       <#assign documentCounter = 1>    
       <#break>
    </#foreach>
    </#foreach>
</#if>


<#if searchResult.docs?has_content>
    <#foreach doc in searchResult.docs>
    <#foreach RecDate1 in doc.getValues("RecDate1")>

<#assign RECDATE1PARTSREPLACE = RecDate1?replace('/', ' ')>
<#assign RECDATE1PARTS = RECDATE1PARTSREPLACE?word_list>

<#list RECDATE1PARTS as RECDATE1PART>
<#if RECDATE1PART_index = 1>
<#assign DAY = RECDATE1PART>
</#if>
<#if RECDATE1PART_index = 2>
<#assign YEAR = RECDATE1PART>
</#if>
<#if RECDATE1PART_index = 0>
 <#if RECDATE1PART?length = 1>
    <#assign MONTH = "0" + RECDATE1PART>
 <#else>
    <#assign MONTH = RECDATE1PART>
 </#if>
</#if>
</#list>

    </#foreach>
    </#foreach>
</#if>


<#if searchResult.docs?has_content>

<#if (documentCounter > 0)>

 
    <#foreach doc in searchResult.docs>
        <#foreach Instrument in doc.getValues("Instrument")>
            <a href="${request.getContextPath()}/search.do?indexName=arlimages&lq=${pageStyleUtil.encodeURL("Instrument:" + doc.get("Instrument"))}" target="_new">View Full Screen Image</a>
        </#foreach>
    </#foreach>
&nbsp; &nbsp;<a href = "http://www.adobe.com/products/acrobat/readstep2.html"><img src = "${request.getContextPath()}/templates/details/Details_SN/resource/adobe.bmp" border = "0"></a>
<br><br>
<b>Document</b>
<table  id="document" class="tablesorter">
 <thead><tr>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("Instrument").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("RecDate1").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("RecDate2").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("DocType").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("BookType").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("Book").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("Page").displayName}</th>   
  <th class="ui-state-default">Brief Case</th> 
</tr></thead>


 <tbody>

<#foreach doc in searchResult.docs>
    
    <#assign RecDate1 = doc.getValues("RecDate1")>
    <#assign RecDate2 = doc.getValues("RecDate2")>
    <#assign DocType = doc.getValues("DocType")>
    <#assign BookType = doc.getValues("BookType")>
    <#assign Book = doc.getValues("Book")>
    <#assign Page = doc.getValues("Page")>
    
    <#assign loopCounter = 0>

    <#foreach Instrument in doc.getValues("Instrument")>
    <tr>
        <#assign caseNumberKey = Instrument>

             <td>${Instrument}</td>
             <td>${RecDate1[loopCounter]?replace('|', '&nbsp;')}</td>
             <td>${RecDate2[loopCounter]?replace('|', '&nbsp;')}</td>
             <td>${DocType[loopCounter]?replace('|', '&nbsp;')}</td>
             <td>${BookType[loopCounter]?replace('|', '&nbsp;')}</td>
             <td>${Book[loopCounter]?replace('|', '&nbsp;')}</td>
             <td>${Page[loopCounter]?replace('|', '&nbsp;')}</td>
             <td><a href="javascript:;" onclick="addToCart('indexName?=?opr?=?OPR', 'Instrument?=?${Instrument}?con?Instrument?=?${Instrument?replace("'", "\\'")?replace("\"", "\\\"")}?con?${searchResult.datasetConfiguration.getColumn("DocType").displayName}?=?${DocType[loopCounter]?replace('|', '&nbsp;')}', '${pageStyleUtil.encodeURL("YEAR:\"" + YEAR + "\" AND MONTH:\"" + MONTH + "\"")}&DAY=${DAY}&INSTRUMENT=${Instrument}', '25');" >Add</a></td>    


                        <#assign loopCounter = loopCounter + 1>
    </tr>
     </#foreach>

</#foreach>

 </tbody>
</table>


<table id="document2" class="tablesorter">
 <thead><tr>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("JudgmentNumber").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("FileNumber").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("JudgmentDate").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("JudgmentAmount").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("QueueStatus").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("ImageStatus").displayName}</th>
  <th class="ui-state-default">Remarks</th>
 </tr></thead>

 <tbody>

<#foreach doc in searchResult.docs>
    <#assign JudgmentNumber = doc.getValues("JudgmentNumber")>
    <#assign FileNumber = doc.getValues("FileNumber")>
    <#assign JudgmentDate = doc.getValues("JudgmentDate")>
    <#assign JudgmentAmount = doc.getValues("JudgmentAmount")>
    <#assign QueueStatus = doc.getValues("QueueStatus")>
    <#assign ImageStatus = doc.getValues("ImageStatus")>  
    <#assign Remarks1 = doc.getValues("Remarks1")>  
    <#assign loopCounter = 0>


    <#foreach Instrument in doc.getValues("Instrument")>
    <tr>
             <td>${searchResult.highlight(doc, "JudgmentNumber")}</td>
			 <td>${searchResult.highlight(doc, "FileNumber")}</td>
			 <td>${searchResult.highlight(doc, "JudgmentDate")}</td>
			 <td align = "right">${JudgmentAmount[loopCounter]?replace('|', '&nbsp;')}</td>
             <td>
              <#if doc.get("QueueStatus")="5"> <#assign QueueStatus = "Y"> ${QueueStatus[loopCounter]?replace('|', '&nbsp;')}
              <#else><#assign QueueStatus = "N">  ${QueueStatus[loopCounter]?replace('|', '&nbsp;')}
             
              </#if>
             </td>
             <td>${ImageStatus[loopCounter]?replace('|', '&nbsp;')}</td>
             <td>${Remarks1[loopCounter]?replace('|', '&nbsp;')}</td>
             <#assign loopCounter = loopCounter + 1>
    </tr>
     </#foreach>

</#foreach>

 </tbody>
</table>

</#if>
</#if>

<table id="propertyContainer" class="tablesorter" style="border:0;margin:0;padding:0;">
<tr style="border:0;margin:0;padding:0;">
  <td style="border:0;margin:0;padding:0;">
    <div id="propcontainer" style="border:0;margin:0;padding:0;"></div>
  </td>
</tr>
</table>

<#--Start ENTITY -->

<#assign entityCounter = 0>

<#if searchResult.docs?has_content>
    <#foreach doc in searchResult.docs>
    <#foreach EntityRole in doc.getValues("EntityRole")>
       <#assign entityCounter = 1>  
       <#break>
    </#foreach>
    </#foreach>
</#if>

<#if searchResult.docs?has_content>

<#if (entityCounter > 0)>


<b>Party</b>
<table id="entity" class="tablesorter">
 <thead>
   <tr>
	  <th class="ui-state-default">Entity Name</th>
	  <th class="ui-state-default">Entity Role</th>
	  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("Desigstatus").displayName}</th>
	  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("Corp").displayName}</th>
   </tr>
   </thead>
 <tbody>

<#foreach doc in searchResult.docs>
    
<#assign EntityRole = doc.getValues("EntityRole")>
    <#assign Desigstatus = doc.getValues("Desigstatus")>
    <#assign Corp = doc.getValues("Corp")>
    <#assign EntitySeq = doc.getValues("EntitySeq")>
	<#assign RoleCode = doc.getValues("RoleCode")>
    <#assign loopCounter = 0>

    <#foreach EntityName in doc.getValues("EntityName")>
    <tr>
        <td>${EntityName?replace('|', '&nbsp;')}</td>
        <td>${RoleCode[loopCounter]?replace('|', '&nbsp;')} </td>
        <td>${Desigstatus[loopCounter]?replace('|', '&nbsp;')} </td>
	<td>${Corp[loopCounter]?replace('|', '&nbsp;')}</td>
   
    <#assign loopCounter = loopCounter + 1>
    </tr>
     </#foreach>
</#foreach>


 </tbody>
</table>

</#if>
</#if>

<#--Start LEGAL -->
<#assign legalCounter = 0>

<#if searchResult.docs?has_content>
    <#foreach doc in searchResult.docs>
    <#foreach LegalType in doc.getValues("LegalType")>
       <#assign legalCounter = 1>   
       <#break>
    </#foreach>
    </#foreach>
</#if>

<#if searchResult.docs?has_content>

<#if (legalCounter > 0)>


<b>Legal</b>
<table id="legal" class="tablesorter">
 <thead><tr>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("Address").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("Freeform").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("RPC").displayName}</th>



   </tr></thead>
 <tbody>

<#foreach doc in searchResult.docs>
    <#assign Address = doc.getValues("Address")>
    <#assign Freeform= doc.getValues("Freeform")>
    <#assign RPC = doc.getValues("RPC")>
    <#assign loopCounter = 0>

    <#foreach LegalType in doc.getValues("LegalType")>
    <tr>
       <td>${searchResult.highlight(doc, "Address")}</td>
     <td>${Freeform[loopCounter]?replace('|', '&nbsp;')}</td>
     <td>${searchResult.highlight(doc, "RPC")}</td>
     <#assign loopCounter = loopCounter + 1>
    </tr>
     </#foreach>

</#foreach>


 </tbody>
</table>

</#if>
</#if>



<#--Start REFERENCES -->

<#assign docrefCounter = 0>

<#if searchResult.docs?has_content>
    <#foreach doc in searchResult.docs>
    <#foreach DocRefType in doc.getValues("DocRefType")>
       <#assign docrefCounter = 1>  
       <#break>
    </#foreach>
    </#foreach>
</#if>

<#if searchResult.docs?has_content>

<#if (docrefCounter > 0)>



<b>References</b>
<table id="docref" class="tablesorter">
 <thead><tr>
<th>${searchResult.datasetConfiguration.getColumn("DocRefSeq").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("RefInstrument").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("DocRefBookType").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("DocRefBook").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("DocRefPage").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("DocRefLegacy").displayName}</th>

   </tr></thead>
 <tbody>

<#foreach doc in searchResult.docs>
    
    <#assign RefInstrument = doc.getValues("RefInstrument")>
    <#assign DocRefBookType = doc.getValues("DocRefBookType")>
    <#assign DocRefBook = doc.getValues("DocRefBook")>
    <#assign DocRefPage = doc.getValues("DocRefPage")>
    <#assign DocRefLegacy = doc.getValues("DocRefLegacy")>
    <#assign loopCounter = 0>

<#foreach DocRefSeq in doc.getValues("DocRefSeq")>

    <tr>
             <td>${DocRefSeq?replace('-1', '&nbsp;')}</td>
<td>

<a href="${request.getContextPath()}/search.do?indexName=details&templateName=Details_SNMobile&lq=${pageStyleUtil.encodeURL("Instrument:\"")}${RefInstrument[loopCounter]}${pageStyleUtil.encodeURL("\"")}&OI=${OI}&IS=${IS}&IC=${IC}"> ${RefInstrument[loopCounter]?replace('|', '&nbsp;')} </a> 

</td>
  <td>${DocRefBookType[loopCounter]?replace('|', '&nbsp;')}</td>
  <td>${DocRefBook[loopCounter]?replace('|', '&nbsp;')}</td>
  <td>${DocRefPage[loopCounter]?replace('|', '&nbsp;')}</td>
  <td>${DocRefLegacy[loopCounter]?replace('|', '&nbsp;')}</td>
   <#assign loopCounter = loopCounter + 1>
    </tr>
     </#foreach>

</#foreach>


 </tbody>
</table>

</#if>
</#if>


<table id="ref" class="tablesorter" style="border:0;margin:0;padding:0;">
<tr style="border:0;margin:0;padding:0;">
  <td style="border:0;margin:0;padding:0;">
    <div id="referencecontainer" style="border:0;margin:0;padding:0;"></div>
  </td>
</tr>
</table>



<script type="text/javascript">
function open_win()
{
window.open('${request.getContextPath()}/search.do?indexName=reference&templateName=reference_Mobile&lq=Instrument%3A%22${caseNumberKey}%22')
}
</script>


<script type="text/javascript">
$(document).ready(function() {    

    var url1 = "search.do?indexName=reference&templateName=reference_Mobile&lq=Instrument2%3A%22${caseNumberKey}%22";
    $('#referencecontainer').load(url1);
	var url2 = "search.do?indexName=propertycosts&templateName=property&lq=Instrument:${caseNumberKey}";
    $('#propcontainer').load(url2);

    oTable = $('#searchResult').dataTable({
            "bJQueryUI": true,
            "bPaginate": false,
            "bLengthChange": false,
            "bFilter": false,
            "bSort": true,
            "bInfo": false,
            "bAutoWidth": false,
            "aaSorting": []
        });

        oTable = $('#document').dataTable({
            "bJQueryUI": true,
            "bPaginate": false,
            "bLengthChange": false,
            "bFilter": false,
            "bSort": true,
            "bInfo": false,
            "bAutoWidth": false,
            "aaSorting": []
        });
        oTable = $('#document2').dataTable({
            "bJQueryUI": true,
            "bPaginate": false,
            "bLengthChange": false,
            "bFilter": false,
            "bSort": true,
            "bInfo": false,
            "bAutoWidth": false,
            "aaSorting": []
        });
        oTable = $('#property').dataTable({
	        "bJQueryUI": true,
	        "bPaginate": false,
	        "bLengthChange": false,
	        "bFilter": false,
	        "bSort": true,
	        "bInfo": false,
	        "bAutoWidth": false,
	        "aaSorting": []
        });
        
        oTable = $('#entity').dataTable({
            "bJQueryUI": true,
            "bPaginate": false,
            "bLengthChange": false,
            "bFilter": false,
            "bSort": true,
            "bInfo": false,
            "bAutoWidth": false,
            "aaSorting": []
        });
        oTable = $('#legal').dataTable({
            "bJQueryUI": true,
            "bPaginate": false,
            "bLengthChange": false,
            "bFilter": false,
            "bSort": true,
            "bInfo": false,
            "bAutoWidth": false,
            "aaSorting": []
        });

        oTable = $('#docref').dataTable({
	        "bJQueryUI": true,
	        "bPaginate": false,
	        "bLengthChange": false,
	        "bFilter": false,
	        "bSort": true,
	        "bInfo": false,
	        "bAutoWidth": false,
	        "aaSorting": []
        });
        oTable = $('#returnee').dataTable({
            "bJQueryUI": true,
            "bPaginate": false,
            "bLengthChange": false,
            "bFilter": false,
            "bSort": true,
            "bInfo": false,
            "bAutoWidth": false,
            "aaSorting": []
        });
        
} );
</script>
