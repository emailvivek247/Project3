<?xml version="1.0" encoding="UTF-8"?>
<dataset name="Document Chain" exportedBy="null" createdAt="Thu May 08 17:10:16 EDT 2014">
  <display-order>-1</display-order>
  <description><![CDATA[]]></description>
  <index-dir>docs_docchain</index-dir>
  <is-prefix-root-index-directory>true</is-prefix-root-index-directory>
  <use-server-db-connection>true</use-server-db-connection>
  <number-of-hours-before-deletion>6</number-of-hours-before-deletion>
  <work-directory>_work</work-directory>
  <temporary-index-minimal-merge-percentage>0.0</temporary-index-minimal-merge-percentage>
  <merge-hours enabled="true" begin="19" end="20"/>
  <fetcher-threads>1</fetcher-threads>
  <writer-threads>1</writer-threads>
  <index-max-size>100000.0</index-max-size>
  <list-fetch-size>10000</list-fetch-size>
  <schedules>
   <schedule id="0">
    <is-enabled>false</is-enabled>
    <is-interval>false</is-interval>
    <interval>10</interval>
    <cron-setting>0,10,20,30,40,50 7,8,9,10,11,12,13,14,15,16,17,20,21 * * ?</cron-setting>
    <indexing-mode>Incremental Indexing with Thorough Deletion Detection</indexing-mode>
   </schedule>
   <schedule id="1">
    <is-enabled>false</is-enabled>
    <is-interval>false</is-interval>
    <interval>5</interval>
    <cron-setting>5 19 * * ?</cron-setting>
    <indexing-mode>Incremental Indexing</indexing-mode>
   </schedule>
  </schedules>
  <language>Any</language>
  <analyzer-name>com.fdt.sdl.core.analyzer.NumberLowerCaseAnalyzer</analyzer-name>
  <data-source-type>0</data-source-type>
  <fetcher-configuration dir="null">
  </fetcher-configuration>
  <dataquery name="WorkingQueue" batch-size="128" is-skipping-null-parameters="false">
    <sql><![CDATA[
SELECT 
DOCREF .SEQ_KEY AS SEQ_KEY, 
DOCREF .SEQ_KEY AS SEQKEY, 
DOCREF .INSTNUM AS REFNUM,
DOCREF .FILENUM_OLD AS LEGACYREFNNUM,
DOCUMENT.DOC_TYPE
FROM DOCREF 
INNER JOIN DOCUMENT ON DOCUMENT.SEQ_KEY = DOCREF.INSTNUM
WHERE ACTIVE = 'Y' ORDER BY SEQ_KEY DESC
    ]]></sql>
    <column>
      <column-name>SEQ_KEY</column-name>
      <display-name><![CDATA[SEQ_KEY]]></display-name>
      <column-index>1</column-index>
      <column-type precision="19" scale="0">java.math.BigDecimal</column-type>
      <index-field-type>Keyword</index-field-type>
      <is-searchable search-weight="3.0">true</is-searchable>
      <tag><![CDATA[]]></tag>
    </column>
    <column>
      <column-name>SEQKEY</column-name>
      <display-name><![CDATA[SEQKEY]]></display-name>
      <column-index>2</column-index>
      <column-type precision="19" scale="0">java.math.BigDecimal</column-type>
      <index-field-type>Keyword</index-field-type>
      <tag><![CDATA[]]></tag>
    </column>
    <column>
      <column-name>REFNUM</column-name>
      <display-name><![CDATA[REFNUM]]></display-name>
      <column-index>3</column-index>
      <column-type>java.lang.String</column-type>
      <index-field-type>Keyword</index-field-type>
      <is-searchable search-weight="3.0">true</is-searchable>
      <tag><![CDATA[]]></tag>
    </column>
    <column>
      <column-name>LEGACYREFNNUM</column-name>
      <display-name><![CDATA[LEGACYREFNNUM]]></display-name>
      <column-index>4</column-index>
      <column-type>java.lang.String</column-type>
      <index-field-type>Keyword</index-field-type>
      <is-searchable search-weight="3.0">true</is-searchable>
      <tag><![CDATA[]]></tag>
    </column>
    <column>
      <column-name>DOC_TYPE</column-name>
      <display-name><![CDATA[DOC_TYPE]]></display-name>
      <column-index>5</column-index>
      <column-type>java.lang.String</column-type>
      <index-field-type>Keyword</index-field-type>
      <is-searchable search-weight="3.0">true</is-searchable>
      <tag><![CDATA[]]></tag>
    </column>
  </dataquery>
  <dataquery name="Deletion">
    <sql><![CDATA[
SELECT RT.CMP_KEY
FROM ROAM_TRACK RT
WHERE 
RT.DATE_TIME_MOD > DATEADD(mi, -10, GETDATE()) AND
RT.DML_TYP IN ('D', 'U') 
AND RT.TAB_NAME = 'DOCREF'
UNION ALL
SELECT CAST(DR.ID AS VARCHAR)+ '-' + CAST(ISNULL(DR.SEQ, 0) as VARCHAR) AS CMP_KEY
FROM DOCREF DR INNER JOIN ROAM_TRACK RT
ON CAST(DR.ID AS VARCHAR)+ '-' + CAST(ISNULL(DR.SEQ, 0) as VARCHAR)= RT.CMP_KEY
WHERE 
RT.DATE_TIME_MOD > DATEADD(mi, -10, GETDATE()) AND 
RT.DML_TYP IN ('D', 'U') AND ACTIVE='Y'
    ]]></sql>
  </dataquery>
  <dataquery name="Incremental">
    <sql><![CDATA[
SELECT CAST(DR.ID AS VARCHAR)+ '-' + CAST(ISNULL(DR.SEQ, 0) as VARCHAR) AS CMP_KEY, CAST(DR.SEQ_KEY AS varchar(15)) AS SEQKEY, ISNULL(DR.INSTNUM,'') AS REFNUM, ISNULL(DR.FILENUM_OLD,'')  AS LEGACYREFNNUM FROM DOCREF DR 
INNER JOIN ROAM_TRACK RT ON CAST(DR.ID AS VARCHAR)+ '-' + CAST(ISNULL(DR.SEQ, 0) as VARCHAR) = RT.CMP_KEY 
WHERE ACTIVE = 'Y' AND RT.DATE_TIME_MOD > ?
AND RT.TAB_NAME = 'DOCREF' AND RT.DML_TYP IN ('I', 'U')
ORDER BY DR.SEQ_KEY DESC
    ]]></sql>
  </dataquery>
  <default-template>chain</default-template>
  <searcher-max-active>8</searcher-max-active>
  <searcher-when-exhausted>1</searcher-when-exhausted>
  <searcher-max-wait>10000</searcher-max-wait>
  <searcher-max-idle>7</searcher-max-idle>
  <is-in-memory-search>false</is-in-memory-search>
  <jvm-max-heap-size>8192</jvm-max-heap-size>
  <max-field-length>100</max-field-length>
  <document-buffer-size-mb>4048</document-buffer-size-mb>
  <allowed-ip-list>*</allowed-ip-list>
  <date-weight-formula>
    <time-weight time="600" weight="12.0"/>
    <time-weight time="1800" weight="11.0"/>
    <time-weight time="3600" weight="10.0"/>
    <time-weight time="21600" weight="9.0"/>
    <time-weight time="43200" weight="8.0"/>
    <time-weight time="86400" weight="7.0"/>
    <time-weight time="1296000" weight="6.0"/>
    <time-weight time="2678400" weight="5.0"/>
    <time-weight time="5356800" weight="4.0"/>
    <time-weight time="8035200" weight="3.0"/>
    <time-weight time="16070400" weight="2.0"/>
    <time-weight time="32140800" weight="1.3"/>
    <time-weight time="64281600" weight="1.2"/>
    <time-weight time="96422400" weight="1.1"/>
    <time-weight time="128563200" weight="1.05"/>
    <time-weight time="160704000" weight="1.04"/>
    <time-weight time="192844800" weight="1.03"/>
    <time-weight time="224985600" weight="1.02"/>
    <time-weight time="321408000" weight="1.01"/>
  </date-weight-formula>
  <spell-checking enabled="true"></spell-checking>
</dataset>
