<#assign OI = request.getParameter("OI")>
<#assign IS = request.getParameter("IS")>
<#assign IC = request.getParameter("IC")>
<#assign DC = request.getParameter("DC")>

<#--Start DOCUMENT-->
<#if searchResult.docs?has_content>
<b>Document</b>
<table id="searchResult" class="tablesorter">
 <thead>
    <tr>
        <th>${searchResult.datasetConfiguration.getColumn("Instrument").displayName}</th>
        <th>${searchResult.datasetConfiguration.getColumn("RecDate1").displayName}</th>
        <th>${searchResult.datasetConfiguration.getColumn("DocType").displayName}</th>
        <th>${searchResult.datasetConfiguration.getColumn("BookType").displayName}</th>
        <th>${searchResult.datasetConfiguration.getColumn("Book").displayName}</th>
        <th>${searchResult.datasetConfiguration.getColumn("Page").displayName}</th>
        <th>Brief Case</th>
  
  
    </tr>
 </thead>
 <tbody>
 <#foreach doc in searchResult.docs>
     
     <#assign RecDate1 = doc.getValues("RecDate1")>
 <#--    <#assign RecDate2 = doc.getValues("RecDate2")> -->
     <#assign DocType = doc.getValues("DocType")>
     <#assign BookType = doc.getValues("BookType")>
     <#assign Book = doc.getValues("Book")>
     <#assign Page = doc.getValues("Page")>
     
     <#assign loopCounter = 0>
 
     <#foreach Instrument in doc.getValues("Instrument")>
     <tr>
              <#assign caseNumberKey = Instrument>
              <td>${Instrument}</td>
              <td>${RecDate1[loopCounter]?replace('|', '&nbsp;')}</td>
   <#--           <td>${RecDate2[loopCounter]?replace('|', '&nbsp;')}</td> -->
              <td>${DocType[loopCounter]?replace('|', '&nbsp;')}</td>
              <td>${BookType[loopCounter]?replace('|', '&nbsp;')}</td>
              <td>${Book[loopCounter]?replace('|', '&nbsp;')}</td>
              <td>${Page[loopCounter]?replace('|', '&nbsp;')}</td>
              
 <td>
<#--
<a href="javascript:;" onclick="addToCart('indexName?=?randolphsyn?=?Randolph', 'pk_key?=?${KEY}?con?Instrument?=?${Instrument?replace("'", "\\'")?replace("\"", "\\\"")}?con?${searchResult.datasetConfiguration.getColumn("DocType").displayName}?=?${DocType[loopCounter]?replace('|', '&nbsp;')}', '${pageStyleUtil.encodeURL("Instrument:" + Instrument)}', '25');" >Add</a>
-->
<a href="javascript:;" onclick="addToCart('indexName?=?randolphsyn?=?Randolph', 'Instrument?=?${Instrument}?con?Instrument?=?${Instrument?replace("'", "\\'")?replace("\"", "\\\"")}?con?${searchResult.datasetConfiguration.getColumn("DocType").displayName}?=?${DocType[loopCounter]?replace('|', '&nbsp;')}', '${pageStyleUtil.encodeURL("Instrument:" + Instrument)}', '25');" >Add</a>

</td>    
     <#assign loopCounter = loopCounter + 1>
    </tr>
      </#foreach>
 
</#foreach>
</#if>
 </tbody>
</table>

<table id="document" class="tablesorter">
 <thead><tr>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("PageCount").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("Amount6").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("Legacy").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("QueueStatus").displayName}</th>
  <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("ImageStatus").displayName}</th>
 </tr class="ui-state-default"></thead>

 <tbody>

<#foreach doc in searchResult.docs>
    <#assign PageCount = doc.getValues("PageCount")>
    <#assign Amount6 = doc.getValues("Amount6")>
    <#assign LegacyNumber = doc.getValues("Legacy")>    
    <#assign QueueStatus = doc.getValues("QueueStatus")>
    <#assign ImageStatus= doc.getValues("ImageStatus")>  
    <#assign loopCounter = 0>


    <#foreach Instrument in doc.getValues("Instrument")>
    <tr>
             <td>${PageCount[loopCounter]?replace('|', '&nbsp;')}</td>
             <td align = "right">$${Amount6[loopCounter]?replace('|', '&nbsp;')}</td>
             <td>${LegacyNumber[loopCounter]?replace('|', '&nbsp;')}</td>
             <td>
              <#if doc.get("QueueStatus")="5"> <#assign QueueStatus = "Y"> ${QueueStatus[loopCounter]?replace('|', '&nbsp;')}
              <#else><#assign QueueStatus = "N">  ${QueueStatus[loopCounter]?replace('|', '&nbsp;')}
             
              </#if>
             </td>
             <td>${ImageStatus[loopCounter]?replace('|', '&nbsp;')}</td>
             <#assign loopCounter = loopCounter + 1>
    </tr>
     </#foreach>

</#foreach>

 </tbody>
</table>


<#--Start PROPERTY-->

<#assign propertyCounter = 0>

<#if searchResult.docs?has_content>
    <#foreach doc in searchResult.docs>
    <#foreach Property in doc.getValues("Property")>
       <#assign propertyCounter = 1>    
       <#break>
    </#foreach>
    </#foreach>
</#if>

<#if searchResult.docs?has_content>

<#if (propertyCounter > 0)>
<b>Property</b>
<table id="property" class="tablesorter">
 <thead><tr>
  <th>${searchResult.datasetConfiguration.getColumn("Property").displayName}</th>
  <th>${searchResult.datasetConfiguration.getColumn("PropertyValue").displayName}</th>
 </tr></thead>
 <tbody>

<#foreach doc in searchResult.docs>
    
    <#assign PropertyValue = doc.getValues("PropertyValue")>
    <#assign loopCounter = 0>

    <#foreach Property in doc.getValues("Property")>
    <tr>
             <td>${Property?replace('|', '&nbsp;')}</td>
             <td>${PropertyValue[loopCounter]?replace('|', '&nbsp;')}</td>
   <#assign loopCounter = loopCounter + 1>
    </tr>
     </#foreach>

</#foreach>

 </tbody>
</table>
</#if>
</#if>

<#--Start ENTITY -->

<#assign entityCounter = 0>

<#if searchResult.docs?has_content>
    <#foreach doc in searchResult.docs>
    <#foreach EntityRole in doc.getValues("EntityRole")>
       <#assign entityCounter = 1>  
       <#break>
    </#foreach>
    </#foreach>
</#if>

<#if searchResult.docs?has_content>

<#if (entityCounter > 0)>


<b>Entity</b>
<table id="entity" class="tablesorter">
    <thead>
       <tr>
      <th>${searchResult.datasetConfiguration.getColumn("EntityName").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("EntityRole").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("Desigstatus").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("Corp").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("EntitySeq").displayName}</th>
       </tr>
    </thead>
 <tbody>

<#foreach doc in searchResult.docs>
    
<#assign EntityRole = doc.getValues("EntityRole")>
    <#assign Desigstatus = doc.getValues("Desigstatus")>
    <#assign Corp = doc.getValues("Corp")>
    <#assign EntitySeq = doc.getValues("EntitySeq")>
    <#assign loopCounter = 0>

    <#foreach EntityName in doc.getValues("EntityName")>
    <tr>
        <td>${EntityName?replace('|', '&nbsp;')}</td>
        <td>${EntityRole[loopCounter]?replace('|', '&nbsp;')} </td>
        <td>${Desigstatus[loopCounter]?replace('|', '&nbsp;')} </td>
    <td>${Corp[loopCounter]?replace('|', '&nbsp;')}</td>
    <td>${EntitySeq[loopCounter]?replace('|', '&nbsp;')}</td>
    <#assign loopCounter = loopCounter + 1>
    </tr>
     </#foreach>
</#foreach>


 </tbody>
</table>

</#if>
</#if>

<#--Start LEGAL -->
<#assign legalCounter = 0>

<#if searchResult.docs?has_content>
    <#foreach doc in searchResult.docs>
    <#foreach Instrument in doc.getValues("Instrument")>
       <#assign legalCounter = 1>   
       <#break>
    </#foreach>
    </#foreach>
</#if>

<#if searchResult.docs?has_content>

<#if (legalCounter > 0)>


<b>Legal</b>
<table id="legal" class="tablesorter">
    <thead>
        <tr>
      <th>${searchResult.datasetConfiguration.getColumn("Lot").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("BlockNum").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("Parcel").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("Sec").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("Township").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("RangeNum").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("Subdivision").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("Other").displayName}</th>
        </tr>
     </thead>
 <tbody>

<#foreach doc in searchResult.docs>
    
    <#assign Lot = doc.getValues("Lot")>
    <#assign Unit = doc.getValues("BlockNum")>
    <#assign Sec = doc.getValues("Parcel")>
    <#assign Ph = doc.getValues("Sec")>
    <#assign Bldg = doc.getValues("Township")>
    <#assign Ac = doc.getValues("RangeNum")>
    <#assign Subdivision = doc.getValues("Subdivision")>
    <#assign Other = doc.getValues("Other")>
    <#assign loopCounter = 0>

    <#foreach Lot in doc.getValues("Lot")>
        <tr>
          <td>${Lot?replace('|', '&nbsp;')}</td>
          <td>${BlockNum?replace('|', '&nbsp;')}</td>
          <td>${Parcel?replace('|', '&nbsp;')}</td>
          <td>${Sec[loopCounter]?replace('|', '&nbsp;')}</td>
          <td>${Township?replace('|', '&nbsp;')}</td>
          <td>${RangeNum?replace('|', '&nbsp;')}</td>
          <td>${Subdivision[0]?replace('|', '&nbsp;')}</td>
          <td>${Other[loopCounter]?replace('|', '&nbsp;')}</td>
          <#assign loopCounter = loopCounter + 1>
        </tr>
     </#foreach>

</#foreach>
</tbody>
</table>
<#--Start DOT

<b>Dot</b>
<table id="dot" class="tablesorter">
<thead>
        <tr>
      <th>${searchResult.datasetConfiguration.getColumn("ProjNum").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("RdNum").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("Other").displayName}</th>
    </tr>
     </thead>
 <tbody>

<#foreach doc in searchResult.docs>
    
    <#assign ProjNum = doc.getValues("ProjNum")>
    <#assign RdNum = doc.getValues("RdNum")>
    <#assign Sec = doc.getValues("Other")>
    <#assign loopCounter = 0>

    <#foreach ProjNum in doc.getValues("ProjNum")>
    <tr>
      <td>${ProjNum?replace('|', '&nbsp;')}</td>
      <td>${RdNum[loopCounter]?replace('|', '&nbsp;')}</td>
      <td>${Other[loopCounter]?replace('|', '&nbsp;')}</td>
      <#assign loopCounter = loopCounter + 1>
    </tr>
     </#foreach>

</#foreach>


 </tbody>
 </table>
End DOT-->


<#--Start FREEFORM -->

<b>Freeform</b>
 <table id="free" class="tablesorter">
 <thead>
         <tr>
      <th>${searchResult.datasetConfiguration.getColumn("Desc1").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("Desc2").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("Desc3").displayName}</th>
    </tr>
      </thead>
  <tbody>
 
 <#foreach doc in searchResult.docs>
     
     <#assign Desc1 = doc.getValues("Desc1")>
     <#assign Desc2 = doc.getValues("Desc2")>
     <#assign Desc3 = doc.getValues("Desc3")>
     <#assign loopCounter = 0>
 
     <#foreach Desc1 in doc.getValues("Desc1")>
     <tr>
      <td>${Desc1?replace('|', '&nbsp;')}</td>
      <td>${Desc2[loopCounter]?replace('|', '&nbsp;')}</td>
      <td>${Desc3[loopCounter]?replace('|', '&nbsp;')}</td>
      <#assign loopCounter = loopCounter + 1>
     </tr>
      </#foreach>
 
 </#foreach>
 
 
  </tbody>
 </table>

</#if>
</#if>

<#-- Start GPIN

<#assign gpinCounter = 0>

<#if searchResult.docs?has_content>
    <#foreach doc in searchResult.docs>
    <#foreach Instrument in doc.getValues("Instrument")>
       <#assign gpinCounter = 1>   
       <#break>
    </#foreach>
    </#foreach>
</#if>

<#if searchResult.docs?has_content>

<#if (gpinCounter > 0)>
 
 <b>GPIN</b>
  <table id="gpin" class="tablesorter">
  <thead>
          <tr>
      <th>${searchResult.datasetConfiguration.getColumn("GPIN").displayName}</th>
      <th>${searchResult.datasetConfiguration.getColumn("Active").displayName}</th>
    </tr>
       </thead>
   <tbody>
  
  <#foreach doc in searchResult.docs>
      
      <#assign GPIN = doc.getValues("GPIN")>
      <#assign Active = doc.getValues("Active")>
      <#assign loopCounter = 0>
  
      <#foreach GPIN in doc.getValues("GPIN")>
      <tr>
      <td>${GPIN?replace('|', '&nbsp;')}</td>
      <td>${Active[0]?replace('|', '&nbsp;')}</td> 
      <#assign loopCounter = loopCounter + 1>
      </tr>
       </#foreach>
  
  </#foreach>
  
  
   </tbody>
 </table>
</#if>
</#if>
End GPIN -->


<#--Start REFERENCES -->

<#assign docrefCounter = 0>

<#if searchResult.docs?has_content>
    <#foreach doc in searchResult.docs>
    <#foreach DocRefType in doc.getValues("DocRefType")>
       <#assign docrefCounter = 1>  
       <#break>
    </#foreach>
    </#foreach>
</#if>

<#if searchResult.docs?has_content>

<#if (docrefCounter > 0)>
<b>References</b>
<table id="docref" class="tablesorter">
     <thead>
        <tr>
      <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("DocRefSeq").displayName}</th>
      <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("RefInstrument").displayName}</th>
      <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("DocRefBookType").displayName}</th>
      <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("DocRefBook").displayName}</th>
      <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("DocRefPage").displayName}</th>
      <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("DocRefLegacy").displayName}</th>
        </tr>
     </thead>
 <tbody>

<#foreach doc in searchResult.docs>
    
    <#assign RefInstrument = doc.getValues("RefInstrument")>
    <#assign DocRefBookType = doc.getValues("DocRefBookType")>
    <#assign DocRefBook = doc.getValues("DocRefBook")>
    <#assign DocRefPage = doc.getValues("DocRefPage")>
    <#assign DocRefLegacy = doc.getValues("DocRefLegacy")>
    <#assign loopCounter = 0>

<#foreach DocRefSeq in doc.getValues("DocRefSeq")>

    <tr>
             <td>${DocRefSeq?replace('|', '&nbsp;')}</td>
<td>

    <font size="2px" face="verdana,sans-serif"><a href="${request.getContextPath()}/search.do?indexName=randolphdetails&templateName=default&lq=${pageStyleUtil.encodeURL("Instrument:\"")}${RefInstrument[loopCounter]}${pageStyleUtil.encodeURL("\"")}&OI=${OI}&IS=${IS}&IC=${IC}"> ${RefInstrument[loopCounter]?replace('|', '&nbsp;')} </a></font>

</td>
  <td>${DocRefBookType[loopCounter]?replace('|', '&nbsp;')}</td>
  <td>${DocRefBook[loopCounter]?replace('|', '&nbsp;')}</td>
  <td>${DocRefPage[loopCounter]?replace('|', '&nbsp;')}</td>
  <td>${DocRefLegacy[loopCounter]?replace('|', '&nbsp;')}</td>
   <#assign loopCounter = loopCounter + 1>
    </tr>
     </#foreach>

</#foreach>


 </tbody>
</table>

</#if>
</#if>

<table id="ref" class="tablesorter" style="border:0;margin:0;padding:0;">
<tr style="border:0;margin:0;padding:0;"><td style="border:0;margin:0;padding:0;"><div id="referencecontainer" style="border:0;margin:0;padding:0;"></div></td></tr>
</table>




<#assign returneeCounter = 0>

<#if searchResult.docs?has_content>
    <#foreach doc in searchResult.docs>
    <#foreach CustomerInfoName in doc.getValues("CustomerInfoName")>
       <#assign returneeCounter = 1>    
       <#break>
    </#foreach>
    </#foreach>
</#if>

<#if searchResult.docs?has_content>

<#if (returneeCounter > 0)>



<b>Returnee</b>
<table id="returnee" class="tablesorter">
    <thead>
        <tr>
      <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("CustomerInfoSeq").displayName}</th>
      <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("CustomerInfoName").displayName}</th>
      <th class="ui-state-default">${searchResult.datasetConfiguration.getColumn("DateReturned").displayName}</th>
        </tr>
    </thead>
 <tbody>

<#foreach doc in searchResult.docs>
    
    <#assign CustomerInfoName = doc.getValues("CustomerInfoName")>
    <#assign DateReturned = doc.getValues("DateReturned")>
    <#assign loopCounter = 0>

 <#foreach CustomerInfoSeq in doc.getValues("CustomerInfoSeq")>
        <tr>
       <td>${CustomerInfoSeq?replace('|', '&nbsp;')}</td>
       <td>${CustomerInfoName[loopCounter]?replace('|', '&nbsp;')}</td>
       <td>${DateReturned[loopCounter]?replace('|', '&nbsp;')}</td>
       <#assign loopCounter = loopCounter + 1>
        </tr>
  </#foreach>

</#foreach>
 </tbody>
</table>
</#if>
</#if>
</td>

<td valign = "TOP" width="55%">
 <table width="100%">
    <#foreach doc in searchResult.docs>
        <tr valign = "TOP">
        <#foreach Instrument in doc.getValues("Instrument")>
<#-- *Check to display image -->

<#-- The below if condition is redundant -->

            <td align="left">
                <a href="${request.getContextPath()}/search.do?indexName=randolphimages&lq=${pageStyleUtil.encodeURL("Instrument:" + doc.get("Instrument"))}" target="image" onclick="return loadit();">View Image</a>
                &nbsp; &nbsp; <a href="${request.getContextPath()}/search.do?indexName=randolphimages&lq=${pageStyleUtil.encodeURL("Instrument:" + doc.get("Instrument"))}" target="_new">View Full Screen Image</a>
                                &nbsp; &nbsp; <a href = "http://www.adobe.com/products/acrobat/readstep2.html"><img src = "${request.getContextPath()}/templates/randolphdetails/default/resource/adobe.bmp" border = "0"></a>
            </td>   
        </#foreach>
        </tr>
    </#foreach>
   <tr>
    <td>
       <#if searchResult.docs?has_content>
           <#foreach doc in searchResult.docs>  
                <#assign loopCounter = 0>
                <#foreach Instrument in doc.getValues("Instrument")>
                   <div>
                      <iframe frameborder=0  height=900 width=950 name="image" id="image" src=''>Your browser does not support iframes.</iframe>
                            <div id="loading">
                                <br><img src="${request.getContextPath()}/templates/randolphdetails/default/resource/loading.gif">
                            </div>
                   </div>
                </#foreach>
           </#foreach>
         </td>
     </tr>
</#if>
    </table>
   </td>
  </tr>
</table>
<script type="text/javascript">
function open_win()
{
window.open('${request.getContextPath()}/search.do?indexName=reference&templateName=reference&lq=Instrument%3A%22${caseNumberKey}%22')
}
</script>


<script type="text/javascript">
$(document).ready(function() {

    var url1 = "search.do?indexName=reference&templateName=reference&lq=RefInstrument2%3A%22${caseNumberKey}%22";
    $('#referencecontainer').load(url1);

    oTable = $('#searchResult').dataTable({
        "bJQueryUI": true,
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false,
        "aaSorting": []
    });
    
    oTable = $('#document').dataTable({
        "bJQueryUI": true,
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false,
        "aaSorting": []
    });
    
    oTable = $('#entity').dataTable({
        "bJQueryUI": true,
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false,
        "aaSorting": []
    });
    oTable = $('#legal').dataTable({
        "bJQueryUI": true,
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false,
        "aaSorting": []
    });
    oTable = $('#dot').dataTable({
        "bJQueryUI": true,
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false,
        "aaSorting": []
    });
    oTable = $('#free').dataTable({
        "bJQueryUI": true,
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false,
        "aaSorting": []
    });
    oTable = $('#gpin').dataTable({
        "bJQueryUI": true,
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false,
        "aaSorting": []
    });
    oTable = $('#docref').dataTable({
        "bJQueryUI": true,
        "bPaginate": false,
        "bLengthChange": false,
        "bFilter": false,
        "bSort": true,
        "bInfo": false,
        "bAutoWidth": false,
        "aaSorting": []
    });
    
} );
</script>