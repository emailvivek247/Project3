<?xml version="1.0" encoding="UTF-8"?>
<dataset name="Historical Index Images" exportedBy="null" createdAt="Tue Sep 11 11:29:07 EDT 2012">
  <display-order>-1</display-order>
  <description><![CDATA[Dallas Images]]></description>
  <index-dir>histbookimages</index-dir>
  <is-prefix-root-index-directory>true</is-prefix-root-index-directory>
  <use-server-db-connection>false</use-server-db-connection>
  <work-directory>_work</work-directory>
  <temporary-index-minimal-merge-percentage>1.0</temporary-index-minimal-merge-percentage>
  <merge-hours enabled="false" begin="1" end="3"/>
  <fetcher-threads>7</fetcher-threads>
  <writer-threads>3</writer-threads>
  <index-max-size>100000.0</index-max-size>
  <list-fetch-size>10000</list-fetch-size>
  <schedules>
   <schedule id="0">
    <is-enabled>true</is-enabled>
    <is-interval>false</is-interval>
    <interval>5</interval>
    <cron-setting>0 0 ? * 1</cron-setting>
    <indexing-mode>Re-create Index</indexing-mode>
   </schedule>
  </schedules>
  <language>Any</language>
  <analyzer-name>com.fdt.sdl.core.analyzer.NumberLowerCaseAnalyzer</analyzer-name>
  <data-source-type>0</data-source-type>
  <fetcher-configuration dir="null">
  </fetcher-configuration>
  <data-sources>
    <data-source>
      <name>default</name>
      <driver-directory-name>sqlserver</driver-directory-name>
      <jdbcdriver>com.microsoft.sqlserver.jdbc.SQLServerDriver</jdbcdriver>
      <db-url><![CDATA[jdbc:sqlserver://RODSQL1;instanceName=AMCADDB1;databaseName=AILIS5]]></db-url>
      <db-username>ailis5</db-username>
      <db-password>$enc$ykZDCMjJmn0=</db-password>
      <dbcp-validation-query><![CDATA[
SELECT 1
  ]]></dbcp-validation-query>
    </data-source>
  </data-sources>
  <dataquery name="WorkingQueue" batch-size="128" is-skipping-null-parameters="false">
    <sql><![CDATA[
SELECT DISTINCT
        BOOKTYPE AS 'HistBookType'
       ,BOOK AS 'Book'
       ,PAGE AS 'Page'
       ,image AS 'Image'
       ,PATH AS 'Path'
       ,SERVER AS 'Server' 
       ,ID
       ,'\\' + SERVER + '\' + PATH + '\' + BOOKTYPE + '\' + BOOK + '\' + IMAGE  AS 'ImagePath'  
FROM bpimageindex
Where
(book + ' ' + PAGE)<>'1160 1767'
and (book + ' ' + PAGE)<>'1171 1162'
and (book + ' ' + PAGE)<>'1159 1949'
and (book + ' ' + PAGE)<>'1165 817'
and (book + ' ' + PAGE)<>'1169 1083'
and (book + ' ' + PAGE)<>'1170 1300'
and (book + ' ' + PAGE)<>'1167 720'
and (book + ' ' + PAGE)<>'1167 830'
and (book + ' ' + PAGE)<>'1160 1497'
and (book + ' ' + PAGE)<>'1165 562'
and (book + ' ' + PAGE)<>'1159 1044'
and (book + ' ' + PAGE)<>'1169 173'
and (book + ' ' + PAGE)<>'1163 613'
and (book + ' ' + PAGE)<>'1167 615'
and (book + ' ' + PAGE)<>'1160 1527'
and (book + ' ' + PAGE)<>'1161 628'
and (book + ' ' + PAGE)<>'1170 1378'
and (book + ' ' + PAGE)<>'1172 373'
and (book + ' ' + PAGE)<>'1168 91'
and (book + ' ' + PAGE)<>'1165 1295'
and (book + ' ' + PAGE)<>'1164 209'
and (book + ' ' + PAGE)<>'1169 7'
and (book + ' ' + PAGE)<>'1170 1028'
and (book + ' ' + PAGE)<>'1159 1560'
and (book + ' ' + PAGE)<>'1160 800'
and (book + ' ' + PAGE)<>'1167 2021'
and (book + ' ' + PAGE)<>'1170 1456'
and (book + ' ' + PAGE)<>'1169 127'
and (book + ' ' + PAGE)<>'1161 66'
and (book + ' ' + PAGE)<>'1162 1692'
and (book + ' ' + PAGE)<>'1165 626'
and (book + ' ' + PAGE)<>'1169 1959'
and (book + ' ' + PAGE)<>'1168 940'
and (book + ' ' + PAGE)<>'1168 1418'
and (book + ' ' + PAGE)<>'1171 1313'
and (book + ' ' + PAGE)<>'1171 1314'
and (book + ' ' + PAGE)<>'1163 1644'
and (book + ' ' + PAGE)<>'1167 1711'
and (book + ' ' + PAGE)<>'1162 1774'
and (book + ' ' + PAGE)<>'1163 508'
and (book + ' ' + PAGE)<>'1160 691'
and (book + ' ' + PAGE)<>'1162 155'
and (book + ' ' + PAGE)<>'1162 838'
and (book + ' ' + PAGE)<>'1163 1147'
and (book + ' ' + PAGE)<>'1169 921'
and (book + ' ' + PAGE)<>'1172 828'
and (book + ' ' + PAGE)<>'1169 230'
and (book + ' ' + PAGE)<>'1160 2085'
and (book + ' ' + PAGE)<>'1169 138'
and (book + ' ' + PAGE)<>'1161 194'
and (book + ' ' + PAGE)<>'1164 173'
and (book + ' ' + PAGE)<>'1166 366'
and (book + ' ' + PAGE)<>'1166 568'
and (book + ' ' + PAGE)<>'1160 1444'
and (book + ' ' + PAGE)<>'1161 1050'
and (book + ' ' + PAGE)<>'1159 1393'
and (book + ' ' + PAGE)<>'1170 1065'
and (book + ' ' + PAGE)<>'1160 795'
and (book + ' ' + PAGE)<>'1168 1149'
and (book + ' ' + PAGE)<>'1166 1505'
and (book + ' ' + PAGE)<>'1168 1564'
and (book + ' ' + PAGE)<>'1163 481'
and (book + ' ' + PAGE)<>'1166 676'
and (book + ' ' + PAGE)<>'1165 3'
and (book + ' ' + PAGE)<>'1166 1988'
and (book + ' ' + PAGE)<>'1169 584'
and (book + ' ' + PAGE)<>'1169 1776'
and (book + ' ' + PAGE)<>'1171 32'
and (book + ' ' + PAGE)<>'1162 550'
and (book + ' ' + PAGE)<>'1168 124'
and (book + ' ' + PAGE)<>'1168 1220'
and (book + ' ' + PAGE)<>'1168 415'
and (book + ' ' + PAGE)<>'1171 71'
and (book + ' ' + PAGE)<>'1169 578'
and (book + ' ' + PAGE)<>'1162 1929'
and (book + ' ' + PAGE)<>'1165 393'
and (book + ' ' + PAGE)<>'1166 1128'
and (book + ' ' + PAGE)<>'1160 1680'
and (book + ' ' + PAGE)<>'1162 495'
and (book + ' ' + PAGE)<>'1163 78'
and (book + ' ' + PAGE)<>'1162 1552'
and (book + ' ' + PAGE)<>'1165 305'
and (book + ' ' + PAGE)<>'1168 1734'
and (book + ' ' + PAGE)<>'1162 496'
and (book + ' ' + PAGE)<>'1161 86'
and (book + ' ' + PAGE)<>'1164 1656'
and (book + ' ' + PAGE)<>'1162 1929'
and (book + ' ' + PAGE)<>'1162 1930'
    ]]></sql>
    <column>
      <column-name>HistBookType</column-name>
      <display-name><![CDATA[HistBookType]]></display-name>
      <column-index>1</column-index>
      <column-type>java.lang.String</column-type>
      <index-field-type>Text</index-field-type>
      <tag><![CDATA[]]></tag>
    </column>
    <column>
      <column-name>Book</column-name>
      <display-name><![CDATA[Book]]></display-name>
      <column-index>2</column-index>
      <column-type>java.lang.String</column-type>
      <index-field-type>Text</index-field-type>
      <tag><![CDATA[]]></tag>
    </column>
    <column>
      <column-name>Page</column-name>
      <display-name><![CDATA[Page]]></display-name>
      <column-index>3</column-index>
      <column-type>java.lang.String</column-type>
      <index-field-type>Text</index-field-type>
      <tag><![CDATA[]]></tag>
    </column>
    <column>
      <column-name>Image</column-name>
      <display-name><![CDATA[Image]]></display-name>
      <column-index>4</column-index>
      <column-type>java.lang.String</column-type>
      <index-field-type>Text</index-field-type>
      <tag><![CDATA[]]></tag>
    </column>
    <column>
      <column-name>Path</column-name>
      <display-name><![CDATA[Path]]></display-name>
      <column-index>5</column-index>
      <column-type>java.lang.String</column-type>
      <index-field-type>Text</index-field-type>
      <tag><![CDATA[]]></tag>
    </column>
    <column>
      <column-name>Server</column-name>
      <display-name><![CDATA[Server]]></display-name>
      <column-index>6</column-index>
      <column-type>java.lang.String</column-type>
      <index-field-type>Text</index-field-type>
      <tag><![CDATA[]]></tag>
    </column>
    <column>
      <column-name>ID</column-name>
      <display-name><![CDATA[ID]]></display-name>
      <column-index>7</column-index>
      <column-type precision="10" scale="0">java.math.BigDecimal</column-type>
      <index-field-type>Keyword</index-field-type>
      <is-searchable search-weight="3.0">true</is-searchable>
      <tag><![CDATA[]]></tag>
    </column>
    <column>
      <column-name>ImagePath</column-name>
      <display-name><![CDATA[ImagePath]]></display-name>
      <column-index>8</column-index>
      <column-type>java.lang.String</column-type>
      <index-field-type>Text</index-field-type>
      <tag><![CDATA[]]></tag>
    </column>
  </dataquery>
  <dataquery name="Incremental">
    <sql><![CDATA[
SELECT 
	 A.SEQ_KEY AS 'Instrument'
	,LTRIM(RTRIM(C.SERVER)) AS 'Server'
	,LTRIM(RTRIM(C.PATH))   AS 'Path'
	,C.YEAR   AS 'Year'
	,CASE
		WHEN LEN(C.MONTH)=1 THEN '0'+ CAST(C.MONTH AS VARCHAR) 
			ELSE CAST(C.MONTH AS VARCHAR)
    END AS 'Month'
	,SUBSTRING(B.IMAGE_PATH, 0, 3) AS 'Day'
	,SUBSTRING(B.IMAGE_PATH, 4, 100) AS 'ImageName'
	,b.date_time_mod
FROM (DOCUMENT A INNER JOIN DOCUMENT_IMAGE B 
	  ON A.SEQ_KEY=B.SEQ_KEY)
      LEFT JOIN IMAGE_LOC C ON DATEPART(YEAR,A.RECDATE1)= C.YEAR AND DATEPART(MONTH,A.RECDATE1)=C.MONTH
Where
	b.date_time_mod > DATEADD(HH, -1, GETDATE())
    ]]></sql>
  </dataquery>
  <default-template>Image</default-template>
  <tablet-template>Image</tablet-template>
  <mobile-template>Image</mobile-template>
  <searcher-max-active>8</searcher-max-active>
  <searcher-when-exhausted>1</searcher-when-exhausted>
  <searcher-max-wait>10000</searcher-max-wait>
  <searcher-max-idle>7</searcher-max-idle>
  <is-in-memory-search>false</is-in-memory-search>
  <jvm-max-heap-size>8192</jvm-max-heap-size>
  <max-field-length>30000</max-field-length>
  <document-buffer-size-mb>4048</document-buffer-size-mb>
  <allowed-ip-list>*</allowed-ip-list>
  <is-empty-query-match-all>false</is-empty-query-match-all>
  <date-weight-formula>
    <time-weight time="600" weight="12.0"/>
    <time-weight time="1800" weight="11.0"/>
    <time-weight time="3600" weight="10.0"/>
    <time-weight time="21600" weight="9.0"/>
    <time-weight time="43200" weight="8.0"/>
    <time-weight time="86400" weight="7.0"/>
    <time-weight time="1296000" weight="6.0"/>
    <time-weight time="2678400" weight="5.0"/>
    <time-weight time="5356800" weight="4.0"/>
    <time-weight time="8035200" weight="3.0"/>
    <time-weight time="16070400" weight="2.0"/>
    <time-weight time="32140800" weight="1.3"/>
    <time-weight time="64281600" weight="1.2"/>
    <time-weight time="96422400" weight="1.1"/>
    <time-weight time="128563200" weight="1.05"/>
    <time-weight time="160704000" weight="1.04"/>
    <time-weight time="192844800" weight="1.03"/>
    <time-weight time="224985600" weight="1.02"/>
    <time-weight time="321408000" weight="1.01"/>
  </date-weight-formula>
  <spell-checking enabled="true"></spell-checking>
</dataset>
