<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<configuration scan="true" scanPeriod="300 seconds">

	<appender class="ch.qos.logback.core.ConsoleAppender" name="STDOUT">
		<encoder>
			<pattern>%d{MM-dd-yy HH:mm:ss.SSS} %-5level [%33.33logger{5}]: %msg%n</pattern>
		</encoder>
	</appender>

	<appender class="ch.qos.logback.core.rolling.RollingFileAppender" name="FILE">
		<file>C:\logs\Ecomadmin\EComAdmin.log</file>
		<append>true</append>
		<encoder>
			<pattern>%d{MM-dd-yy HH:mm:ss.SSS} %-5level [%33.33logger{5}]: %msg%n</pattern>
		</encoder>
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>C:\logs\Ecomadmin\EComAdmin-%d{MM-dd-yyyy}-%i.zip</fileNamePattern>
			<maxHistory>5<!-- days --></maxHistory>
			<timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
			    <!-- or whenever the file size reaches 2MB -->
				<maxFileSize>20MB</maxFileSize>
			</timeBasedFileNamingAndTriggeringPolicy>
		</rollingPolicy>
	</appender>

	<appender class="ch.qos.logback.classic.net.SMTPAppender" name="EMAIL">
		<evaluator class="ch.qos.logback.classic.boolex.OnMarkerEvaluator">
      		<marker>NOTIFY_ADMIN</marker>
    	</evaluator>
    	<smtpHost>mail.amcad.com</smtpHost>
        <to>roamsupport@amcad.com</to>
    	<from>accept@amcad.com</from>
    	<subject>localhost Dev Ecomadmin Error: %logger{20} - %msg</subject>
    	<layout class="ch.qos.logback.classic.PatternLayout">
      		<pattern>%d{MM-dd-yy HH:mm:ss.SSS} %-5level [%thread][%logger{40}] : %msg%n</pattern>
    	</layout>
		<cyclicBufferTracker class="ch.qos.logback.core.spi.CyclicBufferTrackerImpl">
      		<bufferSize>1</bufferSize>
    	</cyclicBufferTracker>
  	</appender>

    <logger level="WARN" name="org.springframework"/>
    <logger level="WARN" name="freemarker"/>
    <logger level="WARN" name="net.sf.jasperreports"/>
    <logger level="WARN" name="org.jmesa"/>
    <logger level="WARN" name="net.sf.ehcache"/>
    <logger level="WARN" name="org.apache"/>
    <logger level="WARN" name="org.quartz"/>
    <logger level="WARN" name="com.atomikos"/>
    <logger level="WARN" name="org.hibernate"/>

	<root level="WARN">
	    <!-- Commented for Prod <appender-ref ref="STDOUT"/>  -->
	    <appender-ref ref="FILE"/>
		<appender-ref ref="EMAIL"/>
	</root>

</configuration>
